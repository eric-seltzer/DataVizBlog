{
  "hash": "dfd263b60c307ea1122518f4152c9e29",
  "result": {
    "markdown": "---\ntitle: \"Finding Indicators for Stock Prices\"\nauthor: \"Eric Seltzer\"\ndate: \"2024-02-09\"\ncategories: [finance, code, analysis]\n---\n\n::: {.cell}\n\n:::\n\n\n\nIntroduction:\n\nAfter finding a data set showing the stock prices of big tech companies, I decided I wanted to investigate to see if there were any correlations to find trends in how their prices perform. This dataset began in 2010 and went to January of 2023 so I decided to cut down the time frame to the most recent five years. I also chose to use the six companies in this dataset with the highest observed closing prices. This allows for less clutter in my visualizations.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npricesNew <-\n  prices |>\n  filter(date > '2018-01-01')\n\nprices |>\n  group_by(stock_symbol) |>\n  summarise(max = max(close)) |>\n  arrange(desc(max)) |>\n  head(n = 6)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 Ã— 2\n  stock_symbol   max\n  <chr>        <dbl>\n1 NFLX          692.\n2 ADBE          688.\n3 TSLA          410.\n4 META          382.\n5 MSFT          343.\n6 NVDA          334.\n```\n:::\n\n```{.r .cell-code}\npricesNew <- \n  pricesNew|>\n  group_by(stock_symbol) |>\n  filter(stock_symbol == c(\"NFLX\", \"ADBE\", \"TSLA\", \"MSFT\", \"NVDA\", \"META\"))\n```\n:::\n\n\n# Plot 1\n\n::: {.cell}\n\n```{.r .cell-code}\npricesNew |>\n  ggplot(aes(x = date,\n             y = close)) +\n  geom_line(aes(color = stock_symbol),\n            linewidth = .9) +\n  scale_color_brewer(palette = \"Paired\") + \n  labs(x = \"Date\",\n       y = \"Closing Price ($)\",\n       title = \"Closing Stock Prices from 6 Big Tech Companies, 2018-2023\",\n       color = \"Tickers\",\n       caption = \"(based on data from Yahoo Finance via Kaggle)\") +\n  scale_x_date(date_minor_breaks = \"6 months\",\n               date_breaks = \"1 year\",\n               date_labels = \"%b %y\") +\n  theme(axis.text.x = element_text(angle = 45,\n                                   hjust = 1,\n                                   vjust = 1),\n        plot.title = element_text(size = 16,\n                                  hjust = 0),\n        axis.title.x = element_blank(),\n        axis.title.y = element_text(size = 14))\n```\n\n::: {.cell-output-display}\n![](tech-stock_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nMy first plot shows the change in price for these six companies and it is easy to see that around January 2022, they all began to take a hit in their price. This begged the question, were there any indicators that this was going to happen? In order to attack this, I decided to investigate the short- and long-term moving averages for each stock, specifically the exponential moving average. An exponential moving average calculates the average of the prices using a weighting multiplier that assigns more weight to later data. In general, when a short-term EMA crosses a long-term EMA, this signifies either a price increase or decrease.\n\nTo calculate this, I had to make a new data set with the dates extending further back in order to get more observations for the moving averages. I also calculated the average price so it can be used as the y-variable.\n\n\n::: {.cell}\n\n```{.r .cell-code}\npricesMA <-\n  prices |>\n  group_by(stock_symbol) |>\n  filter(stock_symbol == c(\"NFLX\", \"ADBE\", \"TSLA\", \"MSFT\", \"NVDA\", \"META\")) |>\n  pivot_longer(cols = 3:6,\n               values_to = \"price\",\n               names_to = \"market\")\n\npricesMA <-\n  pricesMA |>\n  group_by(stock_symbol, date) |>\n  summarise(avgPrice = mean(price))\n\nprices_select <-\n  prices |>\n  filter(stock_symbol == c(\"NFLX\", \"ADBE\", \"TSLA\", \"MSFT\", \"NVDA\", \"META\"))\n```\n:::\n\n\n# Plot 2\n\n::: {.cell}\n\n```{.r .cell-code}\npricesMA |>\n  ggplot(aes(x = date,\n             y = avgPrice)) +\n  geom_ma(ma_fun = EMA,\n          n = 50,\n          aes(color = \"50 EMA\"))+\n  geom_ma(ma_fun = EMA,\n          n = 200,\n          aes(color = \"200 EMA\")) +\n  facet_wrap(vars(stock_symbol),\n             scales = \"free_y\") +\n    scale_x_date(date_breaks = \"4 year\",\n                 date_labels = \"%b %y\") +\n  labs(y = \"Dollars ($)\",\n       colour = \"Moving Averages\",\n       title = \"Short- and Long-Term EMA Compared to Closing Prices, 2010-2023\",\n       caption = \"(based on data from Yahoo Finance via Kaggle)/nEMAs are calculated from library(tidyquant)\") +\n  theme(axis.text.x = element_text(angle = 45,\n                                   hjust = 1,\n                                   vjust = 1),\n        plot.title = element_text(size = 16,\n                                  hjust = 0),\n        axis.title.x = element_blank(),\n        axis.title.y = element_text(size = 14),\n        panel.spacing = unit(1, \"lines\"),\n        strip.text.x = element_text(color = \"black\", \n                                    face = \"bold\"),\n        strip.background = element_rect(colour = \"black\",\n                                        fill = \"white\"),\n        legend.title = element_blank()) +\n  geom_line(data = prices_select,\n            aes(x = date,\n                y = close),\n            linetype = 1,\n            color = \"black\",\n            alpha = .2)\n```\n\n::: {.cell-output-display}\n![](tech-stock_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\nConclusion:\n\nIn this plot, I plotted the moving averages against the closing prices from Plot 1 except this time I faceted by each company in order to compare the companies individually. This leads us to our answer to the original question of if there is a trend or indicator of the price decrease. Typically, when a short-term EMA crosses above the long-term EMA, this is a signal that price might continue to move up. On the opposite hand, this means that if short-term EMA crosses below long-term EMA, price might continue to move down. In every company shown, up until the closing price drop, the short-term was above the long-term. Once the gap between them closed, and short-term came closer to long-term, the closing prices began to decrease. In some of the companies, the short-term even dipped below the long term. In conclusion, using moving averages can be a good indicator for these companies prices going down, but likely isn't the root of the scenario. That can be left to many other more complex factors.\n\nConnections to Class:\nI used many techniques we used in class. The three main ones were changing theme elements, faceting, and using a color scale. ",
    "supporting": [
      "tech-stock_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}